{"mappings":"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","sources":["src/js/filmoteka.js","src/js/fetch/fetch-films.js","<<jsx-config-pragma.js>>","src/js/utils-js/settimeout.js","src/js/utils-js/error-function.js"],"sourcesContent":["import Pagination from 'tui-pagination';\n\nimport FilmsAPI from './fetch/fetch-films';\nimport FilmCards from './markup/film-cards-markup';\n\nimport { refs } from './refs/filmoteka-refs';\nimport { pagination } from './filmoteka-popular';\nimport { popular } from './filmoteka-popular';\nimport { setClearTextContentTimer } from './utils-js/settimeout';\nimport { scrollOnTop } from './scroll/scroll-to-top';\nimport { clearMurkup } from './markup/clear-markup';\nimport { hideElement, hideSpan } from './markup/hide-elements';\nimport { onFetchError } from './utils-js/error-function';\nimport { toggleLoader } from './loader';\nimport { saveCurrentFilmsToLocal } from './display-films';\n\nconst filmsSerchAPI = new FilmsAPI();\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 20,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: true,\n};\n\nconst paginationOnQuerry = new Pagination('pagination', options);\nconst page = paginationOnQuerry.getCurrentPage();\n\nrefs.notificationEl.style.color = '#ff001b';\nrefs.notificationEl.textContent = '';\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n  toggleLoader();\n  event.preventDefault();\n  searchPicturers();\n}\n\n// search function\nfunction searchPicturers() {\n  if (!refs.inputEl.value.trim()) {\n    toggleLoader();\n    refs.notificationEl.style.color = '#ff001b';\n    refs.notificationEl.textContent = 'Please, type something.';\n\n    setClearTextContentTimer();\n    return;\n  }\n\n  filmsSerchAPI.query = refs.inputEl.value.trim();\n\n  if (filmsSerchAPI.lastQuery === filmsSerchAPI.searchQuery) {\n    toggleLoader();\n    return;\n  }\n\n  pagination.off('afterMove', popular);\n  paginationOnQuerry.off('afterMove', userByQuery);\n\n  filmsSerchAPI\n    .fetchFilms(page)\n    .then(data => {\n      if (!data.results.length) {\n        toggleLoader();\n        clearMurkup();\n        refs.notificationEl.style.color = '#ff001b';\n        refs.notificationEl.textContent =\n          'Sorry, there are no films matching your search query. Please, try again.';\n\n        refs.paginationInHome.classList.add('tui-pagination-isHidden');\n        refs.notificationPictureEl.classList.add('section-main__bcg');\n\n        setClearTextContentTimer();\n\n        filmsSerchAPI.lastQuery = '';\n        return;\n      }\n\n      filmsSerchAPI.lastQuery = filmsSerchAPI.query;\n\n      refs.notificationEl.textContent = '';\n      refs.paginationInHome.classList.remove('tui-pagination-isHidden');\n      refs.notificationPictureEl.classList.remove('section-main__bcg');\n\n      scrollOnTop(0);\n      clearMurkup();\n\n      appendFilmCardsMarkup(data.results);\n      toggleLoader();\n      paginationOnQuerry.reset(data.total_results);\n      hideElement();\n\n      paginationOnQuerry.on('afterMove', userByQuery);\n\n      const totalResults = data.total_results;\n\n      refs.notificationEl.style.color = '#00ff22';\n      refs.notificationEl.textContent = `We found ${totalResults} films. Enjoy!`;\n\n      setClearTextContentTimer();\n    })\n    .catch(onFetchError);\n}\n\nfunction userByQuery(event) {\n  const currentPage = event.page;\n  filmsSerchAPI\n    .fetchFilms(currentPage)\n    .then(data => {\n      scrollOnTop(0);\n      clearMurkup();\n      appendFilmCardsMarkup(data.results);\n    })\n\n    .catch(onFetchError);\n}\n\nfunction appendFilmCardsMarkup(results) {\n  refs.filmGalleryContainer.insertAdjacentHTML(\n    'beforeend',\n    FilmCards.createFilmCardMarkup(results)\n  );\n  saveCurrentFilmsToLocal(results);\n  hideElement();\n  hideSpan();\n}\n","import axios from 'axios';\n\nimport { KEY, BASE_URL } from './key-url';\n\nexport default class FilmsAPI {\n  constructor() {\n    this.searchQuery = '';\n    this.lastQuery = '';\n  }\n\n  async fetchFilms(page) {\n    const url = `${BASE_URL}/search/movie?api_key=${KEY}&query=${this.searchQuery}&page=${page}`;\n\n    const { data } = await axios.get(url);\n\n    return data;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n",null,"import { refs } from '../refs/filmoteka-refs';\n\nexport function setClearTextContentTimer() {\n  setTimeout(() => {\n    refs.notificationEl.textContent = '';\n  }, 3000);\n}\n","import { refs } from '../refs/filmoteka-refs';\n\nexport function onFetchError(error) {\n  console.log(error.message);\n\n  refs.notificationEl.style.color = '#ff001b';\n  refs.notificationEl.textContent =\n    'Sorry, something going wrong... Please try again.';\n}\n"],"names":["$1VFfL","parcelRequire","$bpxeT","$3d4fbc75103df954$export$2e2bcd8739ae039","FilmsAPI","this","searchQuery","lastQuery","key","page","$parcel$interopDefault","$2TvXO","mark","_callee","url","data","concat","$lVuNI","BASE_URL","KEY","_this","$dIxxU","default","get","_ctx","sent","newQuery","$5mvrA","$44608c040e6a021d$export$4f04f3e8603d443b","setTimeout","refs","notificationEl","textContent","$c2252093f76bcebb$export$238059e5c5b89ea2","error","console","log","message","style","color","$0d1473df3547cfcd$var$filmsSerchAPI","$0d1473df3547cfcd$var$paginationOnQuerry","totalItems","itemsPerPage","visiblePages","centerAlign","$0d1473df3547cfcd$var$page","getCurrentPage","$0d1473df3547cfcd$var$userByQuery","event","currentPage","fetchFilms","then","$a8hHM","scrollOnTop","$aEj0R","clearMurkup","$0d1473df3547cfcd$var$appendFilmCardsMarkup","results","catch","filmGalleryContainer","insertAdjacentHTML","$7PxVc","createFilmCardMarkup","$3dnU7","saveCurrentFilmsToLocal","$1caSa","hideElement","hideSpan","formEl","addEventListener","$kvC6y","toggleLoader","preventDefault","inputEl","value","trim","query","$huWAn","pagination","off","popular","length","paginationInHome","classList","add","notificationPictureEl","remove","reset","total_results","on","totalResults","$0d1473df3547cfcd$var$searchPicturers"],"version":3,"file":"index.ecd06fcb.js.map"}