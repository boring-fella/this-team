{"mappings":"+oBAAA,IAAAA,EAAAC,EAAA,SAEA,MAIMC,EAAO,CACXC,eAAgBC,SAASC,cAAc,gB,IAsEzCC,EAAe,C,qBAnEf,SAA8BC,GAC5B,IACE,OAAOA,EACJC,KACC,EAACC,YACCA,EAAWC,MACXA,EAAKC,eACLA,EAAcC,KACdA,EAAIC,UACJA,EAASC,aACTA,EAAYC,eACZA,EAAcC,aACdA,MAEA,MAAO,0EAEW,OAAhBP,EAtBV,+EAFsB,kCAwB2CA,WAC/CC,2IAEsBA,GAASC,GAAkBC,wGAEtB,EAAAZ,EAAAiB,eAC/BJ,oGA2BOK,EAxBPJ,GAAgBC,EAyBzBG,EAIEA,EAASC,MAAM,EAAG,GAHhB,sDAvBKC,KAAKC,MAAqB,GAAfL,GAAqB,yEAqBhD,IAAuBE,CAhBd,IAGFI,KAAK,G,CACR,MAAOC,GACPC,QAAQC,IAAIF,EAAMG,SAElBxB,EAAKC,eAAewB,YAClB,oDAEmBC,YAAW,KAC9B1B,EAAKC,eAAewB,YAAc,EAAE,GACnC,I,yCCvDA,SAASE,IACd,MAAMC,EAAiB1B,SAAS2B,iBAAiB,sBAEjD,IAAK,MAAMC,KAAiBF,EAC1BE,EAAcC,UAAUC,IAAI,gB,sDCJhC,IAAAC,EAAAlC,EAAA,S,2CCKA,MAAMmC,EAAO,CACXC,qBAAsBjC,SAASC,cAAc,oBAGzCiC,EAAmB,IDJV,MAKbC,sBACE,MAAMC,EAAM,iGAA6CC,KAAKC,QAG5DC,MAAMC,QAAEA,UACAT,EAAAU,QAAMC,IAAIN,GAEpB,OADAhB,QAAQC,IAAIe,GACLI,C,CAGTG,eACEN,KAAKC,MAAQ,C,CAGfM,YACEP,KAAKC,KAAO,C,CAnBdO,cACER,KAAKC,KAAO,C,GCIhBQ,OAAOC,iBAAiB,QAExB,SAAsBC,GACpBd,EAAiBe,gBAAgBC,MAAKV,KAMxC,SAA+BA,IAC7B,EAAAW,EAAAC,yBAAwBZ,GACxBR,EAAKC,qBAAqBoB,mBACxB,YACAC,EAAAb,QAAUc,qBAAqBf,KAGjC,EAAAgB,EAAAC,c,CAZEC,CAAsBlB,EAAQ,G","sources":["src/js/markup/film-cards-markup.js","src/js/markup/hide-elements.js","src/js/fetch/fetch-popular-films.js","src/js/filmoteka-popular.js"],"sourcesContent":["import { findGenreById } from '../fetch/fetch-genres';\n\nconst BASE_IMAGES_URL = 'https://image.tmdb.org/t/p/w500';\nconst RES_PICTURE =\n  'https://cdn.pixabay.com/photo/2019/04/12/19/23/film-35mm-4122911_960_720.jpg';\n\nconst refs = {\n  notificationEl: document.querySelector('.text-error'),\n};\n\nfunction createFilmCardMarkup(film) {\n  try {\n    return film\n      .map(\n        ({\n          poster_path,\n          title,\n          original_title,\n          name,\n          genre_ids,\n          release_date,\n          first_air_date,\n          vote_average,\n        }) => {\n          return `<div class=\"film__card\">\n          <img class=\"film-card__image\" src=\"${\n            poster_path === null ? RES_PICTURE : BASE_IMAGES_URL + poster_path\n          }\" alt=\"${title}\" loading=\"lazy\" title=\"Click to enlarge\"/>\n          <div class=\"film-card__features-wrap\">\n            <p class=\"film-card__title\">${title || original_title || name}</p>\n            <div class=\"film-card__tech-wrap\">\n              <p class=\"film-card__features\">${findGenreById(\n                genre_ids\n              )}<span class=\"film-card__features-mark\"> |</span></p>\n              <p class=\"film-card__date\">${sliceFunction(\n                release_date || first_air_date\n              )}</p>\n              <p class=\"film-card__rating\">${\n                Math.round(vote_average * 10) / 10\n              }</p>\n            </div>\n          </div>\n        </div>\n        `;\n        }\n      )\n      .join('');\n  } catch (error) {\n    console.log(error.message);\n\n    refs.notificationEl.textContent =\n      'Sorry, something going wrong... Please try again.';\n\n    const onCatchTimer = setTimeout(() => {\n      refs.notificationEl.textContent = '';\n    }, 2000);\n  }\n}\n\nfunction sliceFunction(filmDate) {\n  if (!filmDate) {\n    return '';\n  }\n\n  return filmDate.slice(0, 4);\n}\n\nfunction imgError() {\n  return '../images/film-default.png';\n}\n\nfunction imgError(image) {\n  image.onerror = '';\n  image.src = '/images/film-default.png';\n  return true;\n}\n\nexport default { createFilmCardMarkup };\n","export function hideElement() {\n  const ratingElements = document.querySelectorAll('.film-card__rating');\n\n  for (const ratingElement of ratingElements) {\n    ratingElement.classList.add('elem-isHidden');\n  }\n}\n\n// export default { hideElement };\n\nexport function hideMark() {\n  const dateElements = document.querySelectorAll('.film-card__date');\n  const featuresElements = document.querySelectorAll('.film-card__features');\n  const featuresMarkElements = document.querySelectorAll(\n    '.film-card__features-mark'\n  );\n\n  //   console.log(dateElements);\n  //   console.log(featuresElements);\n  //   console.log(featuresMarkElements);\n\n  for (const dateElement of dateElements) {\n    console.log(dateElement.textContent.length);\n\n    if (!dateElement.textContent.length) {\n      featuresMarkElements.classList.add('elem-isHidden');\n    }\n  }\n}\n","import axios from 'axios';\n\nconst KEY = '3c2d3d1a4a9318a7ef02a0fdedccb03f';\nconst BASE_URL = 'https://api.themoviedb.org/3/trending';\n\nexport default class PopFilmsAPI {\n  constructor() {\n    this.page = 1;\n  }\n\n  async fetchPopFilms() {\n    const url = `${BASE_URL}/movie/day?api_key=${KEY}&page=${this.page}`;\n\n    const {\n      data: { results },\n    } = await axios.get(url);\n    console.log(url);\n    return results;\n  }\n\n  icrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\n","import PopFilmsAPI from './fetch/fetch-popular-films';\nimport FilmCards from './markup/film-cards-markup';\nimport { hideElement, hideMark } from './markup/hide-elements';\nimport { saveCurrentFilmsToLocal, getFilmFromLocal } from './display-films';\n\nconst refs = {\n  filmGalleryContainer: document.querySelector('.film-container'),\n};\n\nconst popFilmsSerchAPI = new PopFilmsAPI();\n\nwindow.addEventListener('load', onWindowLoad);\n\nfunction onWindowLoad(event) {\n  popFilmsSerchAPI.fetchPopFilms().then(results => {\n    appendFilmCardsMarkup(results);\n  });\n}\n\n// markup functions\nfunction appendFilmCardsMarkup(results) {\n  saveCurrentFilmsToLocal(results);\n  refs.filmGalleryContainer.insertAdjacentHTML(\n    'beforeend',\n    FilmCards.createFilmCardMarkup(results)\n  );\n\n  hideElement();\n}\n"],"names":["$459vf","parcelRequire","$c9159c8b1b15c073$var$refs","notificationEl","document","querySelector","$c9159c8b1b15c073$export$2e2bcd8739ae039","film","map","poster_path","title","original_title","name","genre_ids","release_date","first_air_date","vote_average","findGenreById","filmDate","slice","Math","round","join","error","console","log","message","textContent","setTimeout","$24a444db626c6b20$export$7669482c90f5c50f","ratingElements","querySelectorAll","ratingElement","classList","add","$2shzp","$510661d661a36e8a$var$refs","filmGalleryContainer","$510661d661a36e8a$var$popFilmsSerchAPI","async","url","this","page","data","results","default","get","icrementPage","resetPage","constructor","window","addEventListener","event","fetchPopFilms","then","$jkVf4","saveCurrentFilmsToLocal","insertAdjacentHTML","$hgmNe","createFilmCardMarkup","$392Er","hideElement","$510661d661a36e8a$var$appendFilmCardsMarkup"],"version":3,"file":"index.a4a812ed.js.map"}