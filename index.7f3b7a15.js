!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequired7c6=i);var r=i("1VFfL"),a=i("bpxeT"),c=i("8MBJY"),l=i("a2hTj"),u=i("2TvXO"),s=i("dIxxU"),f=function(){"use strict";function t(){e(c)(this,t),this.searchQuery="",this.lastQuery=""}return e(l)(t,[{key:"fetchFilms",value:function(t){var n=this;return e(a)(e(u).mark((function o(){var i,r;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat("https://api.themoviedb.org/3/search/movie","?api_key=").concat("3c2d3d1a4a9318a7ef02a0fdedccb03f","&query=").concat(n.searchQuery,"&page=").concat(t),e.next=3,s.default.get(i);case 3:return r=e.sent.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),o)})))()}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),t}(),d=i("7PxVc"),m=i("huWAn"),y=(m=i("huWAn"),i("a8hHM")),p=i("aEj0R"),h=i("1caSa");function g(e){console.log(e.message);var t=document.querySelector(".text-error");t.style.color="#ff001b",t.textContent="Sorry, something going wrong... Please try again."}i("kvC6y");var v=i("3dnU7"),E={formEl:document.querySelector("#search-form"),inputEl:document.querySelector("#search"),notificationEl:document.querySelector(".text-error"),filmGalleryContainer:document.querySelector(".film-container"),paginationInHome:document.querySelector(".pagination"),notificationPictureEl:document.querySelector("#notification-picture")},x=new f,b=new(e(r))("pagination",{totalItems:0,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0}),C=b.getCurrentPage();function q(e){var t=e.page;x.fetchFilms(t).then((function(e){(0,y.scrollOnTop)(0),(0,p.clearMurkup)(),M(e.results)})).catch(g)}function M(e){E.filmGalleryContainer.insertAdjacentHTML("beforeend",d.default.createFilmCardMarkup(e)),(0,v.saveCurrentFilmsToLocal)(e),(0,h.hideElement)(),(0,h.hideSpan)()}E.notificationEl.style.color="#ff001b",E.notificationEl.textContent="",E.formEl.addEventListener("submit",(function(e){e.preventDefault(),function(){if(!E.inputEl.value.trim()){E.notificationEl.style.color="#ff001b",E.notificationEl.textContent="Please, type something.";setTimeout((function(){E.notificationEl.textContent=""}),3e3);return}if(x.query=E.inputEl.value.trim(),console.log(x.searchQuery),console.log(x.lastQuery),x.lastQuery===x.searchQuery)return void console.log("matched!");m.pagination.off("afterMove",m.popular),b.off("afterMove",q),x.fetchFilms(C).then((function(e){if(e.results.length){x.lastQuery=x.query,console.log(x.searchQuery),console.log(x.lastQuery),E.notificationEl.textContent="",E.paginationInHome.classList.remove("tui-pagination-isHidden"),E.notificationPictureEl.classList.remove("section-main__bcg"),(0,p.clearMurkup)(),M(e.results),b.reset(e.total_results),(0,h.hideElement)(),b.on("afterMove",q);var t=e.total_results;E.notificationEl.style.color="#00ff22",E.notificationEl.textContent="We found ".concat(t," films. Enjoy!");setTimeout((function(){E.notificationEl.textContent=""}),3e3)}else{(0,p.clearMurkup)(),E.notificationEl.style.color="#ff001b",E.notificationEl.textContent="Sorry, there are no films matching your search query. Please, try again.",E.paginationInHome.classList.add("tui-pagination-isHidden"),E.notificationPictureEl.classList.add("section-main__bcg");setTimeout((function(){E.notificationEl.textContent=""}),3e3)}})).catch(g)}()}))}();
//# sourceMappingURL=index.7f3b7a15.js.map
