function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequired7c6=i);var r=i("fb9GJ"),a=i("2shzp");var l=i("hgmNe"),c=i("6Xidn"),s=(c=i("6Xidn"),i("dRsRU")),u=i("B4GFe"),f=i("392Er");function d(e){console.log(e.message);const t=document.querySelector(".text-error");t.style.color="#ff001b",t.textContent="Sorry, something going wrong... Please try again."}var g=i("gjiCh"),m=i("jkVf4");const y={formEl:document.querySelector("#search-form"),inputEl:document.querySelector("#search"),notificationEl:document.querySelector(".text-error"),filmGalleryContainer:document.querySelector(".film-container"),paginationInHome:document.querySelector(".pagination"),notificationPictureEl:document.querySelector("#notification-picture")},p=new class{async fetchFilms(e){const t=`https://api.themoviedb.org/3/search/movie?api_key=3c2d3d1a4a9318a7ef02a0fdedccb03f&query=${this.searchQuery}&page=${e}`,{data:n}=await a.default.get(t);return n}get query(){return this.searchQuery}set query(e){this.searchQuery=e}constructor(){this.searchQuery="",this.lastQuery=""}},h=new(e(r))("pagination",{totalItems:0,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0}),E=h.getCurrentPage();function v(e){const t=e.page;p.fetchFilms(t).then((e=>{(0,s.scrollOnTop)(0),(0,u.clearMurkup)(),b(e.results)})).catch(d)}function b(e){y.filmGalleryContainer.insertAdjacentHTML("beforeend",l.default.createFilmCardMarkup(e)),(0,m.saveCurrentFilmsToLocal)(e),(0,f.hideElement)(),(0,f.hideSpan)()}y.notificationEl.style.color="#ff001b",y.notificationEl.textContent="",y.formEl.addEventListener("submit",(function(e){(0,g.toggleLoader)(),e.preventDefault(),function(){if(!y.inputEl.value.trim()){(0,g.toggleLoader)(),y.notificationEl.style.color="#ff001b",y.notificationEl.textContent="Please, type something.";setTimeout((()=>{y.notificationEl.textContent=""}),3e3);return}if(p.query=y.inputEl.value.trim(),p.lastQuery===p.searchQuery)return void(0,g.toggleLoader)();c.pagination.off("afterMove",c.popular),h.off("afterMove",v),p.fetchFilms(E).then((e=>{if(!e.results.length){(0,g.toggleLoader)(),(0,u.clearMurkup)(),y.notificationEl.style.color="#ff001b",y.notificationEl.textContent="Sorry, there are no films matching your search query. Please, try again.",y.paginationInHome.classList.add("tui-pagination-isHidden"),y.notificationPictureEl.classList.add("section-main__bcg");setTimeout((()=>{y.notificationEl.textContent=""}),3e3);return}p.lastQuery=p.query,y.notificationEl.textContent="",y.paginationInHome.classList.remove("tui-pagination-isHidden"),y.notificationPictureEl.classList.remove("section-main__bcg"),(0,u.clearMurkup)(),b(e.results),(0,g.toggleLoader)(),h.reset(e.total_results),(0,f.hideElement)(),h.on("afterMove",v);const t=e.total_results;y.notificationEl.style.color="#00ff22",y.notificationEl.textContent=`We found ${t} films. Enjoy!`;setTimeout((()=>{y.notificationEl.textContent=""}),3e3)})).catch(d)}()}));
//# sourceMappingURL=index.1855c0e1.js.map
